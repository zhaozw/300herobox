<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<meta name="HandheldFriendly" content="true"/>
		<meta name="MobileOptimized" content="320"/>
		<title>Hello H5+</title>
		<script type="text/javascript" src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/jquery.js"></script>
		<link rel="stylesheet" href="../css/shake.css" />
		<script type="text/javascript" charset="utf-8">
			mui.init();
		</script>	
	</head>
	<body style="background: center center no-repeat url(../img/shake/1.jpg);">
		<header>
			<div class="nvbt iback" onclick="mui.back()"></div>
			<div class="nvtt">摇一摇</div>
		</header>
		<div style="height:100%;text-align:center;overflow:hidden;">
			<div id="up" style="width:100%;height:50%;background:#333;-webkit-transition:all .5s ease-in-out;-ms-transition:all .5s ease-in-out;">
				<img style="height:100%;" src="../img/shakeup.png"/>
			</div>
			<div id="down" style="padding-bottom:20px;width:100%;height:50%;background:#333;-webkit-transition:all .5s ease-in-out;-ms-transition:all .5s ease-in-out;">
				<img style="height:100%;" src="../img/shakedown.png"/>
			</div>
		</div>
		<script type="text/javascript">
		mui.plusReady(function(){
			var up=null,down=null,offset=50;
			var MAX=20;
			var t=null;
			
			up=document.getElementById("up");
			down=document.getElementById("down");
			offset=up.offsetHeight/2;
			
			plus.accelerometer.watchAcceleration(function(a){
				//判断是否摇动手机
				if (Math.abs(a.xAxis) + Math.abs(a.yAxis) + Math.abs(a.zAxis) > MAX){
					setTimeout(function(){
						//更换背景图片
						var index = Math.round(Math.random() * 3 + 1);
						document.body.style.backgroundImage="url(../img/shake/"+index+".jpg)";
					}, 2000);
					//摇动开启动画
					offset=up.offsetHeight/2;
					up.style.webkitTransform = "translateY(-"+offset+"px)";
					up.style.msTransform = "translateY(-"+offset+"px)";
					down.style.webkitTransform = "translateY("+offset+"px)";
					down.style.msTransform = "translateY("+offset+"px)";
					if (t){
						clearTimeout(t);
					}
					t = setTimeout(function(){
						t = null;
						up.style.webkitTransform = "";
						up.style.msTransform = "";
						down.style.webkitTransform = "";
						down.style.msTransform = "";
					},700);
				}
			});

		});
		</script>	
	</body>
</html>